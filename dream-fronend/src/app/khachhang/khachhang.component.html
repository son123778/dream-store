<p class="title">Danh sách khách hàng</p>

<div class="header-container">
  <button (click)="openModal()" class="btn btn-primary add-product-button">Thêm Khách Hàng</button>
  <div class="search-container">
    <p>Tìm Kiếm:</p>
    <input type="text" (input)="filterKhachHangs()" class="input search-input"
      placeholder="Nhập tên khuyến mãi cần tìm..." [(ngModel)]="searchText" />
  </div>
</div>

<div class="table-container">
  <div class="table-scrollable">
    <table class="product-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Mã</th>
          <th>Tên</th>
          <th>Giới tính</th>
          <th>Số điện thoại</th>
          <th>mật khẩu</th>
          <th>Ngày Tạo</th>
          <th>Ngày Sửa</th>
          <th>Trạng thái</th>
          <th colspan="2" style="text-align: center;">Hành động</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let khachhang of filteredKhachHangs,">
          <td>{{ khachhang.id }}</td>
          <td>{{ khachhang.ma }}</td>
          <td>{{ khachhang.ten }}</td>
          <td>{{ khachhang.gioiTinh ? 'Nam' : 'Nữ' }}</td>
<<<<<<< HEAD
          <td>{{ khachhang.email }}</td>
=======
>>>>>>> f1f7959d3d8d09d1f9128c659e1bc975cfddada8
          <td>{{ khachhang.soDienThoai }}</td>
          <td>{{ khachhang.matKhau}}</td>
          <td>{{ khachhang.ngayTao}}</td>
          <td>{{ khachhang.ngaySua}}</td>
          <td>{{ khachhang.trangThai === 1 ? 'Hoạt động' : 'Không hoạt động' }}</td>
          <td>
            <button (click)="showDetail(khachhang.id)" class="button btn-primary">Chi tiết</button>
            <button (click)="editKhachHang(khachhang.id)" class="button btn-primary">Sửa</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="pagination-actions ">

    <!-- Pagination -->
    <nav aria-label="Page navigation">
      <ul class="pagination">
        <!-- Nút Trang trước -->
        <li class="page-item" [class.disabled]="currentPage === 0">
          <button class="page-link" (click)="goToPreviousPage()" [disabled]="currentPage === 0">
            &laquo;
          </button>
        </li>
        <li class="page-item" *ngFor="let page of visiblePages" [class.active]="currentPage === page">
          <button class="page-link" (click)="goToPage(page)">{{ page + 1 }}</button>
        </li>
        <!-- Nút Trang sau -->
        <li class="page-item" [class.disabled]="currentPage >= totalPages - 1">
          <button class="page-link" (click)="goToNextPage()" [disabled]="currentPage >= totalPages - 1">
            &raquo;
          </button>
        </li>
      </ul>
    </nav>
  </div>





  <!-- Modal hiển thị chi tiết voucher -->
  <div class="modal-overlay" *ngIf="showModalDetail" (click)="closeModalDetail()">
    <div class="modal-box" (click)="$event.stopPropagation()">
      <button class="close-btn" (click)="closeModalDetail()">×</button>
      <p class="titleadd">Chi tiết khách hàng</p> <br> <br>

      <!-- Form hiển thị chi tiết voucher -->
      <form *ngIf="selectedKhachHang">
        <div class="input-row">
          <div class="input-field">
            <input type="text" class="input" [(ngModel)]="selectedKhachHang.ma" name="ma" readonly />
            <label for="ma">Mã khách hàng</label>
          </div>
          <div class="input-field">
            <input type="text" class="input" [(ngModel)]="selectedKhachHang.ten" name="ten" readonly />
            <label for="ten">Tên khách hàng</label>
          </div>
        </div>

        <div class="input-row">
          <div class="input-field">
            <input type="text" class="input" [value]="selectedKhachHang.gioiTinh ? 'Nam' : 'Nữ'" readonly />
            <label for="gioiTinh">Giới tính</label>
          </div>
          <div class="input-field">
<<<<<<< HEAD
            <input type="text" class="input" [(ngModel)]="selectedKhachHang.email" name="email" readonly />
            <label for="email">Email</label>
          </div>
          
        </div>

        <div class="input-row">
          <div class="input-field">
            <input type="number" class="input" [(ngModel)]="selectedKhachHang.soDienThoai" name="soDienThoai" readonly />
            <label for="soDienThoai">Số điện thoại</label>
          </div>
=======
            <input type="number" class="input" [(ngModel)]="selectedKhachHang.soDienThoai" name="soDienThoai" readonly />
            <label for="soDienThoai">Số điện thoại</label>
          </div>
        </div>

        <div class="input-row">
>>>>>>> f1f7959d3d8d09d1f9128c659e1bc975cfddada8
          <div class="input-field">
            <input type="text" class="input" [(ngModel)]="selectedKhachHang.matKhau" name="matKhau" readonly />
            <label for="matKhau">Mật khẩu</label>
          </div>
<<<<<<< HEAD
          
          
        </div>
        <div class="input-row">

=======
>>>>>>> f1f7959d3d8d09d1f9128c659e1bc975cfddada8
          <div class="input-field">
            <input type="text" class="input" [value]="selectedKhachHang.trangThai ? 'Hoạt động' : 'Không hoạt động'"
              readonly />
            <label for="trangThai">Trạng thái</label>
          </div>
        </div>
      </form>
    </div>
  </div>
  




  <div class="modal-overlay" *ngIf="showModalEdit" (click)="closeModalEdit()">
    <div class="modal-box" (click)="$event.stopPropagation()">
      <button class="close-btn" (click)="closeModalEdit()">×</button>
      <p class="titleadd">Chi tiết khách hàng</p> <br> <br>



      
      <form (ngSubmit)="updateKhachHang()" #khachHangForm="ngForm">
        <div class="input-row">
          <div class="input-field">
            
            <input type="text" class="input" [(ngModel)]="khachHangEdit.id" name="id" readonly />
            <label for="id">Id</label>
          </div>
          <div class="input-field">
            <input type="text" class="input" [(ngModel)]="khachHangEdit.ma" name="ma" required readonly />
            <label for="ma">Mã khách hàng</label>
            
          </div>
          <div class="input-field">
            <input type="text" class="input" [(ngModel)]="khachHangEdit.ten" name="ten" required
              (input)="clearErrorEdit('ten')" />
            <label for="ten">Tên khách hàng</label>
            <div class="tooltip-error" *ngIf="errors.ten">
              {{ errors.ten}}
            </div>
          </div>
        </div>

        <div class="input-row">
           <div class="input-field">
            <select class="input" [(ngModel)]="khachHangEdit.gioiTinh"name="gioiTinh" required
              (change)="clearErrorEdit('gioiTinh')">
              <option [value]="true">Nam</option>
              <option [value]="false">Nữ</option>
            </select>
            <label for="gioiTinh">Giới tính</label>
            <div class="tooltip-error" *ngIf="errors.gioiTinhh">
              {{ errors.gioiTinh}}
            </div>
          </div> 



          
          <div class="input-field">
<<<<<<< HEAD
            <input type="email" class="input" [(ngModel)]="khachHangEdit.email" name="email" required
              (input)="clearErrorEdit('email')" />
            <label for="email">Email</label>
            <div class="tooltip-error" *ngIf="errors.email">
              {{ errors.email}}
            </div>
          </div>
        </div>

        <div class="input-row">
          <div class="input-field">
=======
>>>>>>> f1f7959d3d8d09d1f9128c659e1bc975cfddada8
            <input type="text" class="input" [(ngModel)]="khachHangEdit.soDienThoai" name="soDienThoai" required
              (input)="clearErrorEdit('soDienThoai')" />
            <label for="soDienThoai">Số điện thoại</label>
            <div class="tooltip-error" *ngIf="errors.soDienThoai">
              {{ errors.soDienThoai}}
            </div>
          </div>
<<<<<<< HEAD
=======
        </div>

        <div class="input-row">
>>>>>>> f1f7959d3d8d09d1f9128c659e1bc975cfddada8
          <div class="input-field">
            <input type="text" class="input" [(ngModel)]="khachHangEdit.matKhau" name="matKhau" required />
            <label for="matKhau">Mật khẩu</label>
            <div class="tooltip-error" *ngIf="errors.matKhau">
              {{ errors.matKhau}}
            </div>
          </div>
<<<<<<< HEAD
          

          
        </div>

        <div class="input-row">
          <div class="input-field">
            <select class="input" [(ngModel)]="khachHangEdit.trangThai"  [value]="khachHangEdit.trangThai" name="trangThai" required
              (change)="clearErrorEdit('trangThai')">
              <option [value]="1">Hoạt động</option>
              <option [value]="0">Không hoạt động</option>
=======
          <div class="input-field">
            <select class="input" [(ngModel)]="khachHangEdit.trangThai"  [value]="khachHangEdit.trangThai" name="trangThai" required
              (change)="clearErrorEdit('trangThai')">
<<<<<<< HEAD
              <option [value]="0">Hoạt động</option>
              <option [value]="1">Không hoạt động</option>
=======
              <option [value]="0">Không hoạt động</option>
              <option [value]="1">Hoạt động</option>
>>>>>>> 0e8d3a9360056e86582919be3e6ed1d065a5aedf
>>>>>>> f1f7959d3d8d09d1f9128c659e1bc975cfddada8
            </select>
            <label for="trangThai">Trạng thái</label>
            <div class="tooltip-error" *ngIf="errors.trangThai">
              {{ errors.trangThai}}
            </div>
          </div> 
<<<<<<< HEAD
=======

          
        </div>

        <div class="input-row">
          
>>>>>>> f1f7959d3d8d09d1f9128c659e1bc975cfddada8
        </div>

        <div class="button-container">
          <button type="submit" class="button btn-primary">Lưu thay đổi</button>
        </div>
      </form>
    </div>
  </div> 


 






  <!-- Them -->
  <div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
    <div class="modal-box" (click)="$event.stopPropagation()">
      <button class="close-btn" (click)="closeModal()">×</button>
      <p class="titleadd">Thêm khách hàng</p> <br> <br>
      <form (ngSubmit)="addKhachHang()" #khachHangForm="ngForm">
        <div class="input-row">
<<<<<<< HEAD
          
=======
          <div class="input-field">
            <input type="text" class="input" [(ngModel)]="khachhang.ma" name="ma" autocomplete="off" required
              autocomplete="off" #ma="ngModel" (input)="clearError('ma')" />
            <label for="ma">Mã khách hàng</label>
            <div class="tooltip-error" *ngIf="errors.ma">
              {{ errors.ma}}
            </div>
          </div>
>>>>>>> f1f7959d3d8d09d1f9128c659e1bc975cfddada8
          <div class="input-field">
            <input type="text" class="input" [(ngModel)]="khachhang.ten" name="ten" required #ten="ngModel"
              (input)="clearError('ten')" />
            <label for="ten">Tên khách hàng</label>
            <div class="tooltip-error" *ngIf="errors.ten">
              {{ errors.ten}}
            </div>
          </div>
<<<<<<< HEAD
            <div class="input-field">
              <select class="input"  [(ngModel)]="khachhang.gioiTinh" name="gioiTinh" required
                (change)="clearError('gioiTinh')">
                <option [value]="true">Nam</option>
                <option [value]="false">Nữ</option>
              </select>
              <label for="gioiTinh">Giới tính</label>
              <div class="tooltip-error" *ngIf="errors.gioiTinh">
                {{ errors.gioiTinh}}
              </div>
            </div>
          
=======
>>>>>>> f1f7959d3d8d09d1f9128c659e1bc975cfddada8

          

        </div>
        <div class="input-row">
<<<<<<< HEAD
          
          
          <div class="input-field">
            <input type="email" class="input" [(ngModel)]="khachhang.email" name="email" required #email="ngModel"
              (input)="clearError('email')" />
            <label for="email">Email</label>
            <div class="tooltip-error" *ngIf="errors.email">
              {{ errors.email}}
            </div>
          </div>
=======
          <div class="input-field">
            <select class="input" [(ngModel)]="khachhang.gioiTinh" name="gioiTinh" required
              (change)="clearError('gioiTinh')">
              <option [value]="true">Nam</option>
              <option [value]="false">Nữ</option>
            </select>
            <label for="gioiTinh">Giới tính</label>
            <div class="tooltip-error" *ngIf="errors.gioiTinh">
              {{ errors.gioiTinh}}
            </div>
          </div>
          
>>>>>>> f1f7959d3d8d09d1f9128c659e1bc975cfddada8
          <div class="input-field">
            <input type="text" class="input" [(ngModel)]="khachhang.soDienThoai" name="soDienThoai" required #soDienThoai="ngModel"
              (input)="clearError('soDienThoai')" />
            <label for="soDienThoai">Số điện thoại</label>
            <div class="tooltip-error" *ngIf="errors.soDienThoai">
              {{ errors.soDienThoai}}
            </div>
          </div>
        </div>
        <div class="input-row">
<<<<<<< HEAD
          
=======
>>>>>>> f1f7959d3d8d09d1f9128c659e1bc975cfddada8
          <div class="input-field">
            <input type="text" class="input" [(ngModel)]="khachhang.matKhau" name="matKhau" required #matKhau="ngModel"
              (input)="clearError('matKhau')" />
            <label for="matKhau">Mật khẩu</label>
            <div class="tooltip-error" *ngIf="errors.matKhau">
              {{ errors.matKhau}}
            </div>
          </div>
          <div class="input-field">
            <select class="input" [(ngModel)]="khachhang.trangThai" name="trangThai" required
              (change)="clearError('trangThai')">
              <option [value]="1">Hoạt động</option>
              <option [value]="0">Không hoạt động</option>
            </select>
            <label for="trangThai">Trạng thái</label>
            <div class="tooltip-error" *ngIf="errors.trangThai">
              {{ errors.trangThai}}
            </div>
          </div>
        </div>
        
        <div class="button-container">
          <button type="submit" class="button btn-primary">Thêm khách hàng</button>
        </div>
      </form>
    </div>
  </div>